#include <main.h>
#include <Lcd4bit.c>

#define Add_SW1   PIN_A3
#define Add_SW2   PIN_A4
#define Add_SW3   PIN_A5
#define Add_SW4   PIN_A6
#define Dat_SW    PIN_A7
#define Crt_SW    PIN_F8

#define Add_Led1  PIN_A10
#define Add_Led2  PIN_A9
#define Add_Led3  PIN_A14
#define Add_Led4  PIN_A15

#define Dat_Led   PIN_B0

#define Seg7_A1   PIN_G2
#define Seg7_A2   PIN_G3
#define Seg7_A3   PIN_G6
#define Seg7_A4   PIN_G7

#define Seg7_B1   PIN_F12
#define Seg7_B2   PIN_F13
#define Seg7_B3   PIN_G0
#define Seg7_B4   PIN_G1

#define PX        PIN_D0
#define PY        PIN_D1
#define PULSEA    PIN_G9
#define PULSEA_   PIN_G8
#define PULSEB    PIN_C13
#define PULSEB_   PIN_C14

#define ON_5V     PIN_E6
#define ON_12V    PIN_E7
#define ON_5V_    PIN_E8
#define ON_12V_   PIN_E9

unsigned char data_switch = 0;
unsigned char data_singled = 0;
unsigned char data_seg7_led1 = 0;
unsigned char data_seg7_led2 = 0;
unsigned int16 dat1 = 50,dat2 = 50,dat3 = 50;

void Switch_control (unsigned char flag);
void Single_Seg7_led_read (unsigned char flag);
void Main_init (void);
void Pulse_switch (unsigned char flag);
void Control_supply (unsigned char flag);
unsigned char Check_connect_computer (void);

void Main_init (void)
{
   set_tris_A(0xFFFF);
   set_tris_B(0x000E);
   set_tris_C(0x901F);
   set_tris_E(0x003F);
   set_tris_F(0xFF00);
   set_tris_D(0xFFFF);
   set_tris_G(0xFCFF);
   output_A(0x0000);
   delay_ms(50);
   lcd_init();
   delay_ms(50);
}
